<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Lottis 8x8 Teile-Puzzle</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: #111;
  color: #fff;
  text-align: center;
}
#puzzle {
  width: 400px;
  height: 400px;
  margin: 20px auto;
  display: grid;
  grid-template-columns: repeat(8, 1fr);
  grid-template-rows: repeat(8, 1fr);
  gap: 1px;
}
.tile {
  width: 50px;
  height: 50px;
  background-image: url("bild.jpeg");
  background-size: 400px 400px;
  cursor: pointer;
  border: 1px solid #222;
}
</style>
</head>
<body>

<h2>Lottis Klassisches 8x8 Puzzle</h2>
<p>Klicke auf zwei Kacheln, um sie zu tauschen und das Bild wieder zusammenzusetzen.</p>

<div id="puzzle"></div>

<script>
const size = 8;
const puzzle = document.getElementById("puzzle");
let tiles = [];
let firstClick = null;

// Kacheln erzeugen
function createTiles() {
  for (let i = 0; i < size * size; i++) {
    const tile = document.createElement("div");
    tile.className = "tile";
    tile.dataset.correct = i; // richtige Position

    const x = (i % size) * 50;
    const y = Math.floor(i / size) * 50;
    tile.style.backgroundPosition = `-${x}px -${y}px`;

    tile.addEventListener("click", () => handleClick(tile));
    tiles.push(tile);
  }
}

// Puzzle mischen
function shuffleTiles() {
  tiles.sort(() => Math.random() - 0.5);
  render();
}

// Kacheln tauschen
function handleClick(tile) {
  if (!firstClick) {
    firstClick = tile;
    tile.style.border = "2px solid yellow";
  } else {
    const secondClick = tile;
    // tauschen im Array
    const index1 = tiles.indexOf(firstClick);
    const index2 = tiles.indexOf(secondClick);
    [tiles[index1], tiles[index2]] = [tiles[index2], tiles[index1]];
    firstClick.style.border = "1px solid #222";
    firstClick = null;
    render();
    checkWin();
  }
}

// Puzzle im DOM anzeigen
function render() {
  puzzle.innerHTML = "";
  tiles.forEach(tile => puzzle.appendChild(tile));
}

// Prüfen, ob Puzzle gelöst ist
function checkWin() {
  for (let i = 0; i < tiles.length; i++) {
    if (parseInt(tiles[i].dataset.correct) !== i) return;
  }
  alert("Puzzle gelöst!");
}

createTiles();
shuffleTiles();
render();
</script>

</body>
</html>
